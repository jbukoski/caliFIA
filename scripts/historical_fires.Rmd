---
title: "Historical Fire"
author: "Jacob Bukoski"
date: "6/17/2020"
output: html_document
---

Examining database that Jeremy sent


```{r}

library(RSQLite)
library(tidyverse)

filename <- "../data/TeamPotts1.db"
sqlite.driver <- dbDriver("SQLite")
db <- dbConnect(sqlite.driver, dbname = filename)

dbListTables(db)

db_COND_LB <- dbReadTable(db, "COND_LVL_LOOK_BACKS_PNW")
db_PLOT_LB <- dbReadTable(db, "PlotLevelFireDisturbPNWFromAnnualVisitLookbacks")

```

```{r}

head(db_COND_LB)
colnames(db_COND_LB)

db_COND_LB %>%
  filter(STATECD == 6) %>%
  mutate(intens_chk = ifelse(INTENSITY == 1, 1, 0)) %>%
  group_by(intens_chk, Source) %>%
  summarize( n = n()) %>%
  select(intens_chk, Source, n)

# Add forest vs. non-forest plots

test <- db_COND_LB %>%
  filter(DSTRBYR1 > 1920, STATECD == 6) %>%
  select(PLOT_FIADB, INVYR, DSTRBYR1) %>%
  distinct() %>%
  group_by(PLOT_FIADB) %>%
  mutate( n = n()) %>%
  ungroup() %>%         
  filter( n >= 2) %>%
  arrange(PLOT_FIADB, DSTRBYR1)


length(unique(test$PLOT_FIADB))

head(test)

```


